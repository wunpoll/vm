## 0. Первичные действия после установки

**Теория:** После свежей установки системы первым делом необходимо обновить список пакетов (репозиториев) и обновить все установленные программы до последних версий. Это закрывает уязвимости и исправляет ошибки.

**Команды:**
```bash
# Обновить список доступных пакетов
sudo apt update

# Обновить все установленные пакеты до последних версий (-y отвечает "да" на все вопросы)
sudo apt upgrade -y

# Установить полезные утилиты, которые пригодятся
# htop - продвинутый монитор процессов
# mc - двухпанельный файловый менеджер для терминала (очень удобен)
# net-tools - для команд ifconfig, netstat и т.д.
# neofetch - для красивого вывода информации о системе
sudo apt install -y htop mc net-tools neofetch

# Посмотреть информацию о системе
neofetch
```

---

## 1. Установка, настройка и конфигурирование ОС

### 1.1 Установка ОС в VirtualBox
**Теория:** Этот этап выполняется через графический интерфейс VirtualBox и установщика Ubuntu/Mint. Команд для этого нет.

**Краткий план действий:**
1.  В VirtualBox нажать "Создать".
2.  Указать имя, выбрать тип "Linux" и версию "Ubuntu (64-bit)".
3.  Выделить ОЗУ (рекомендуется 2048-4096 МБ).
4.  Создать новый виртуальный жесткий диск (VDI, динамический, размер 25-30 ГБ).
5.  В настройках созданной машины, в разделе "Носители", выбрать скачанный ISO-образ Ubuntu/Mint.
6.  Запустить машину и следовать инструкциям графического установщика.

### 1.2 Настройка параметров системы, драйверов и служб

**Теория:** Управление драйверами в Ubuntu автоматизировано, а службы (фоновые процессы, демоны) управляются через `systemd`.

**Команды:**

*   **Драйверы:**
    ```bash
    # Показать список доступных проприетарных драйверов (например, для видеокарты)
    ubuntu-drivers devices
    
    # Автоматически установить рекомендованные драйверы
    sudo ubuntu-drivers autoinstall
    ```

*   **Службы (на примере службы SSH):**
    ```bash
    # Установим службу ssh для примера
    sudo apt install -y openssh-server

    # Проверить статус службы (работает ли она)
    systemctl status ssh
    
    # Остановить службу
    sudo systemctl stop ssh
    
    # Запустить службу
    sudo systemctl start ssh
    
    # Перезапустить службу (после изменения конфигов)
    sudo systemctl restart ssh
    
    # Включить автозапуск службы при старте системы
    sudo systemctl enable ssh
    
    # Отключить автозапуск
    sudo systemctl disable ssh
    ```

### 1.3 Настройка интернет-соединения
**Теория:** В VirtualBox по умолчанию используется тип подключения NAT, который предоставляет интернет гостевой ОС автоматически. Для ручной настройки используется утилита `nmcli` (NetworkManager Command-Line Interface).

**Команды:**
```bash
# Показать сетевые устройства и их состояние
nmcli device status

# Показать все настроенные соединения
nmcli connection show

# Показать IP-адреса (аналог ifconfig)
ip addr show

# Проверить доступность интернета
ping -c 4 google.com
```

### 1.4 Установка базового программного обеспечения
**Теория:** Основной инструмент для установки ПО в Ubuntu/Mint — менеджер пакетов `apt`.

**Команды:**
```bash
# Пример установки набора полезного ПО:
# build-essential - для компиляции программ из исходников
# git - система контроля версий
# curl, wget - утилиты для скачивания файлов
# vim - мощный текстовый редактор
sudo apt install -y build-essential git curl wget vim
```

### 1.5 Установка виртуального принтера
**Теория:** В Linux за печать отвечает система CUPS (Common Unix Printing System). Она позволяет настроить принтеры, в том числе и виртуальные (например, для печати в PDF).

**Команды:**
```bash
# Установить сервер печати CUPS
sudo apt install -y cups

# Включить и запустить службу CUPS
sudo systemctl enable --now cups

# Для управления принтерами через веб-интерфейс, нужно добавить своего пользователя в группу lpadmin
# Замени $USER на свое имя пользователя, если нужно (хотя переменная $USER сработает)
sudo usermod -aG lpadmin $USER

# После этого можно открыть в браузере http://localhost:631 и управлять принтерами
# Для установки PDF-принтера:
sudo apt install -y cups-pdf

# Распечатанные PDF-файлы будут сохраняться в ~/PDF
```

---

## 2. Применение средств защиты

### 2.1 Резервное копирование и создание образа
**Теория:** Для создания "снимка" всей системы на уровне файлов отлично подходит `Timeshift`. Для создания полного образа диска на уровне блоков — `dd`. Проще и безопаснее всего в VirtualBox использовать встроенную функцию "Снимок" (Snapshot) или "Клонировать".

**Командный способ (Timeshift):**
```bash
# Timeshift - лучший инструмент для создания точек восстановления системы
sudo apt install -y timeshift

# Создать снимок системы из командной строки (с комментарием)
sudo timeshift --create --comments "Снимок перед экзаменом"

# Показать список всех снимков
sudo timeshift --list

# Для восстановления нужно выбрать снимок из списка и запустить:
# sudo timeshift --restore --snapshot 'YYYY-MM-DD_HH-MM-SS'
# Делать это нужно осторожно!
```
**Способ VirtualBox (рекомендуется на экзамене):**
1.  Выключить виртуальную машину.
2.  В менеджере VirtualBox выбрать машину.
3.  Справа нажать на иконку меню и выбрать "Снимки".
4.  Нажать "Создать", дать имя снимку (например, "Чистая установка").
5.  Чтобы "откатиться", просто выбери снимок и нажми "Восстановить".

### 2.2 Создание пользователей и настройка прав
**Теория:** Linux — многопользовательская система. Права доступа к файлам и каталогам регулируются для владельца, группы и всех остальных.

**Команды:**
```bash
# Создать нового пользователя (например, examuser) с домашней директорией
sudo adduser examuser

# Создать новую группу (например, developers)
sudo addgroup developers

# Добавить пользователя examuser в группу developers
sudo usermod -aG developers examuser

# Добавить пользователя в группу sudo, чтобы дать ему права администратора
sudo usermod -aG sudo examuser

# Посмотреть, в каких группах состоит пользователь
groups examuser

# Сменить владельца файла/директории
# Создадим файл для примера
sudo touch /tmp/testfile
# Сменим владельца на examuser и группу на developers
sudo chown examuser:developers /tmp/testfile

# Изменить права доступа (chmod)
# r (read) = 4, w (write) = 2, x (execute) = 1
# Пример: 755 -> rwxr-xr-x (владелец может все, остальные только читать и выполнять)
sudo chmod 755 /tmp/testfile

# ls -l покажет права и владельцев
ls -l /tmp/testfile
```

### 2.3 Настройка аутентификации, авторизации и мониторинга
**Теория:** Все важные события в системе, включая попытки входа, логируются. Основной инструмент для просмотра логов в современных системах — `journalctl`.

**Команды:**
```bash
# Показать лог событий аутентификации (входы, sudo и т.д.)
# -f следит за логом в реальном времени (выйти через Ctrl+C)
tail -f /var/log/auth.log

# Более современный способ через journald
journalctl -f -u ssh # Пример: следить за логами службы ssh

# Посмотреть, кто сейчас в системе
who

# Показать историю последних входов
last

# Показать неудачные попытки входа
lastb
```

---

## 3. Установка и настройка программного обеспечения

### 3.1 Установка и базовая настройка ПО (на примере веб-сервера Nginx)
**Теория:** Установим веб-сервер Nginx, настроим его и откроем доступ через брандмауэр.

**Команды:**
```bash
# Установка Nginx
sudo apt install -y nginx

# Проверим статус, должен быть active (running)
systemctl status nginx

# Настройка брандмауэра UFW (Uncomplicated Firewall)
sudo ufw enable # Включить брандмауэр (подтвердить с 'y')
sudo ufw status # Посмотреть статус
sudo ufw app list # Посмотреть профили приложений
sudo ufw allow 'Nginx HTTP' # Разрешить трафик на 80 порт для Nginx
sudo ufw status # Проверить, что правило добавилось

# Теперь в браузере гостевой системы можно открыть http://localhost и увидеть страницу приветствия Nginx

# Базовая настройка: изменим стандартную страницу
# Создадим свою страницу
echo "<h1>Hello from my Exam VM!</h1>" | sudo tee /var/www/html/exam.html

# Теперь в браузере можно открыть http://localhost/exam.html
```

### 3.2 Настройка параметров совместимости
**Теория:** Иногда нужно запустить 32-битное приложение на 64-битной системе. Для этого нужно включить поддержку мультиархитектуры и установить базовые 32-битные библиотеки.

**Команды:**
```bash
# Проверить текущую архитектуру
dpkg --print-architecture

# Добавить поддержку архитектуры i386 (32-bit)
sudo dpkg --add-architecture i386

# Обновить список пакетов с учетом новой архитектуры
sudo apt update

# Установить базовые 32-битные библиотеки
sudo apt install -y libc6:i386 libncurses5:i386 libstdc++6:i386

# Теперь система готова к запуску 32-битных программ
echo "32-bit support enabled."
```

---

## 4. Документирование программного обеспечения

**Теория:** Нужно создать простую документацию для установленного ПО (мы будем документировать наш Nginx). Это можно сделать в виде простого текстового или Markdown файла.

**Создадим файл `README.md`:**
```bash
# Создаем и открываем файл в редакторе nano
nano README.md
```

**Содержимое для файла `README.md` (скопируй и вставь это в `nano`, сохрани через `Ctrl+X`, `Y`, `Enter`):**

```markdown
# Документация пользователя: Веб-сервер Nginx

## 1. Наименование и краткое описание

*   **Наименование:** Nginx Web Server
*   **Описание:** Высокопроизводительный веб-сервер, используемый для отображения веб-страниц пользователям. В нашей конфигурации он настроен для показа тестовой страницы.

## 2. Запуск и выход

*   **Запуск (проверка статуса):** Для проверки, что сервер запущен, используется команда:
    ```bash
    systemctl status nginx
    ```
    Если сервер неактивен, его можно запустить командой:
    ```bash
    sudo systemctl start nginx
    ```
*   **Использование:** Откройте веб-браузер и перейдите по адресу `http://localhost`.
*   **Запланированный выход (остановка):** Для остановки сервера используется команда:
    ```bash
    sudo systemctl stop nginx
    ```

# Руководство по использованию ПО

## 1. Перечень выполняемых функций

*   Отвечает на HTTP-запросы от клиентов (браузеров).
*   Показывает статичные HTML-страницы из каталога `/var/www/html/`.
*   Ведет журналы доступа и ошибок.

## 2. Основные приемы работы

*   **Проверка конфигурации:** Перед перезапуском сервера всегда проверяйте синтаксис конфигурационных файлов:
    ```bash
    sudo nginx -t
    ```
*   **Применение новой конфигурации:** Если тест прошел успешно, плавно перезагрузите Nginx без разрыва соединений:
    ```bash
    sudo systemctl reload nginx
    ```
*   **Просмотр логов доступа:** Чтобы увидеть, кто заходил на сайт:
    ```bash
    tail -f /var/log/nginx/access.log
    ```
*   **Просмотр логов ошибок:** Для диагностики проблем с сервером:
    ```bash
    tail -f /var/log/nginx/error.log
    ```
```
